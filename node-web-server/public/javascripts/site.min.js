!function(a){a.fn.fitText=function(b,c){var d=b||1,e=a.extend({minFontSize:Number.NEGATIVE_INFINITY,maxFontSize:Number.POSITIVE_INFINITY},c);return this.each(function(){var b=a(this),c=function(){b.css("font-size",Math.max(Math.min(b.width()/(10*d),parseFloat(e.maxFontSize)),parseFloat(e.minFontSize)))};c(),a(window).on("resize.fittext orientationchange.fittext",c)})}}(jQuery),$(function(){function h(){window.DeviceOrientationEvent?window.addEventListener("deviceorientation",function(a){if(c){var b=a.beta;i(b)}},!1):d.html("Your device does not support deviceOrientation.").addClass("disabled")}function i(c){c=Math.round(c),c!==g&&(-90>c?c=-90:c>90&&(c=90),a.emit("servo",{id:b,tilt:c}),g=c)}$("h1").fitText(1,{maxFontSize:"64px"}),$("h2").fitText(1,{maxFontSize:"56px"}),$("p").fitText(1,{maxFontSize:"32px"});var a=io.connect("http://188.226.253.132/"),b=null,c=!1,d=$(".servo-status"),e={el:$(".pot"),canvas:null,ctx:null,prevValue:!1,flag:{init:!1},init:function(){e.canvas=document.getElementById("pot-bar"),e.ctx=e.canvas.getContext("2d"),e.resize(),e.flag.init=!0},resize:function(){e.canvas.width=e.el.width(),e.canvas.height=e.el.height(),e.draw(e.prevValue)},draw:function(a){if(!(a===!1||0>a||a>100)){e.ctx.clearRect(0,0,e.canvas.width,e.canvas.height),e.ctx.fillStyle="#333333";var b=e.canvas.width/100*a;e.ctx.fillRect(0,0,b,e.canvas.height)}}};e.init(),a.on("initID",function(a){b=parseInt(a.id,10),console.log("Socket.io id: ",b),c=!0,d.hasClass("disabled")||d.html("Interacting")}),a.on("activeRemove",function(){console.log("Socket.io your id is not active anymore"),c=!1,d.hasClass("disabled")||d.html("Not-interacting. Someone else is controlling it right now.")}),a.on("pot",function(a){var b=parseInt(a.value,10);e.prevValue==b||!e.flag.init||0>b||b>100||(e.prevValue=b,e.draw(b))}),$(window).on("resize",function(){console.log("resize"),e.resize()}),h();var g=0});